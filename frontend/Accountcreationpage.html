<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecordMate</title>
    <link rel="stylesheet" href="Accountcreationpage.css">
    <script src="Signuppage.js"></script>
    
</head>
<body>
   
    <div class="goBackBtn" onclick="goback()">
        <div class='arrow'>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>  

    <form id="newAccountForm">

        <div id="Email">
            <label for="Email">   Email:</label>
            <input type="email" id="email" name="email" required>
        </div> 
        
        <div id="Username">
            <label for="username">Username:</label>
            <input type="username" id="username" name="username" required>
        </div> 

        <div id="Password">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>    

        
        <button class="createAccountButton" type="button" id="createAccountBtn">Create Account</button>
        

        
    </form>

    <script>
        // Function to validate email format
        function isValidEmail(email) {
            // Regular expression for validating email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
    
        // Function to handle form submission
        function handleFormSubmission() {
            // Get the form data
            const email = document.getElementById('email').value;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
    
            // Check if email is in a valid format
            if (!isValidEmail(email)) {
                console.error('Invalid email format');
                return; // Stop form submission
            }
    
            // Create an object with the form data
            const formData = {
                email: email,
                username: username,
                password: password
            };
    
            // Send a POST request to your backend server
            fetch('http://localhost:3000/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => {
                if (response.ok) {
                    // If registration is successful, display a success message or redirect the user to another page
                    window.location.href = 'Loginpage.html';
                    
                } else {
                    // If registration fails, display an error message to the user
                    console.error('Account creation failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    
        // Add an event listener to the Create Account button
        document.getElementById('createAccountBtn').addEventListener('click', handleFormSubmission);
    </script>
    




</body>
</html>